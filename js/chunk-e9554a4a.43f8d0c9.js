(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9554a4a"],{1511:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.profile?r("div",{staticClass:"container py-5"},[r("UserProfileCard",{attrs:{"init-profile":t.profile,currentUser:t.currentUser,commentedRestaurants:t.commentedRestaurants}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{followings:t.profile.Followings}}),r("br"),r("UserFollowersCard",{attrs:{followers:t.profile.Followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{commentedRestaurants:t.commentedRestaurants}}),r("UserFavoritedRestaurantsCard",{attrs:{favoriteRestaurants:t.profile.FavoritedRestaurants}})],1)])],1):t._e()},n=[],i=(r("4160"),r("a630"),r("4ec9"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("5530")),a=(r("96cf"),r("1da1")),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{width:"300",height:"300",src:t.emptyImage(t.profile.image),alt:"img"}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),r("p",{staticClass:"card-text"},[t._v(t._s(t.profile.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[t._v(t._s(t.commentedRestaurants.length))]),t._v(" 已評論餐廳")]),r("li",[r("strong",[t._v(t._s(t.profile.FavoritedRestaurants.length))]),t._v(" 收藏的餐廳")]),r("li",[r("strong",[t._v(t._s(t.profile.Followings.length))]),t._v(" followings (追蹤者)")]),r("li",[r("strong",[t._v(t._s(t.profile.Followers.length))]),t._v(" followers (追隨者)")])]),t.currentUser.id===t.profile.id?r("router-link",{staticClass:"btn btn-info",attrs:{type:"button",to:"/users/"+t.profile.id+"/edit"}},[t._v("edit")]):r("div",{staticClass:"btns"},[t.isFollower?r("button",{staticClass:"btn btn-danger",attrs:{disabled:t.isProcessing,type:"button"},on:{click:t.toggleFollowing}},[t._v("取消追蹤")]):r("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isProcessing,type:"button"},on:{click:t.toggleFollowing}},[t._v("追蹤")])])],1)])])])},l=[],c=(r("4de4"),r("caad"),r("d81d"),r("2532"),r("2708")),u=r("4cce"),d=r("2fa3"),f={mixins:[c["a"]],props:{initProfile:{type:Object,require:!0},currentUser:{type:Object,require:!0},commentedRestaurants:{type:Array,required:!0}},data:function(){return{isProcessing:!1,profile:this.initProfile}},watch:{initProfile:function(t){this.profile=t}},computed:{isFollower:function(){return this.profile.Followers.map((function(t){return t.id})).includes(this.currentUser.id)}},methods:{toggleFollowing:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,s,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.isProcessing=!0,r=t.profile.id,!t.isFollower){e.next=10;break}return e.next=6,u["a"].deleteFollowing({userId:r});case 6:s=e.sent,t.profile.Followers=t.profile.Followers.filter((function(e){return e.id!==t.currentUser.id})),e.next=14;break;case 10:return e.next=12,u["a"].addFollowing({userId:r});case 12:s=e.sent,t.profile.Followers.push({id:t.currentUser.id});case 14:if(t.isProcessing=!1,n=s,i=n.data,"error"!==i.status){e.next=18;break}throw new Error("data.msg");case 18:e.next=25;break;case 20:e.prev=20,e.t0=e["catch"](0),console.error(e.t0),t.isProcessing=!1,d["a"].fire({icon:"error",title:"無法更新追蹤，請稍後再試"});case 25:case"end":return e.stop()}}),e,null,[[0,20]])})))()}}},v=f,p=r("2877"),h=Object(p["a"])(v,o,l,!1,null,null,null),m=h.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followings.length))]),t._v(" followings (追蹤者)")]),r("div",{staticClass:"card-body"},t._l(t.followings,(function(e){return r("router-link",{key:e.id,attrs:{to:"/users/"+e.id}},[r("img",{attrs:{width:"60",height:"60",src:t.emptyImage(e.image),alt:"img of user"}})])})),1)])},w=[],b={mixins:[c["a"]],props:{followings:{type:Array,require:!0}}},y=b,x=Object(p["a"])(y,g,w,!1,null,null,null),_=x.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followers.length))]),t._v(" followers (追隨者)")]),r("div",{staticClass:"card-body"},t._l(t.followers,(function(e){return r("router-link",{key:e.key,attrs:{to:"/users/"+e.id}},[r("img",{attrs:{width:"60",height:"60",src:t.emptyImage(e.image),alt:"img of user"}})])})),1)])},k=[],R={mixins:[c["a"]],props:{followers:{type:Array,require:!0}}},F=R,E=Object(p["a"])(F,C,k,!1,null,null,null),U=E.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.commentedRestaurants.length))]),t._v("已評論餐廳")]),r("div",{staticClass:"card-body"},t._l(t.commentedRestaurants,(function(e){return r("router-link",{key:e.id,attrs:{to:"/restaurants/"+e.id}},[r("img",{attrs:{width:"60",height:"60",src:t.emptyImage(e.image),alt:"img of restaurant"}})])})),1)])},j=[],I={mixins:[c["a"]],props:{commentedRestaurants:{type:Array,require:!0}}},A=I,P=Object(p["a"])(A,O,j,!1,null,null,null),z=P.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.favoriteRestaurants.length))]),t._v("收藏餐廳")]),r("div",{staticClass:"card-body"},t._l(t.favoriteRestaurants,(function(e){return r("router-link",{key:e.id,attrs:{to:"/restaurants/"+e.id}},[r("img",{attrs:{width:"60",height:"60",src:t.emptyImage(e.image),alt:"img of restaurant"}})])})),1)])},q=[],S={mixins:[c["a"]],props:{favoriteRestaurants:{type:Array,require:!0}}},$=S,K=Object(p["a"])($,D,q,!1,null,null,null),M=K.exports,Q=r("2f62"),T={components:{UserProfileCard:m,UserFollowingsCard:_,UserFollowersCard:U,UserCommentsCard:z,UserFavoritedRestaurantsCard:M},data:function(){return{profile:void 0,isFollowed:void 0}},methods:{fetchUser:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var s,n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].get({userId:t});case 3:if(s=r.sent,n=s.data,i=s.statusText,"OK"===i){r.next=8;break}throw new Error(n.msg);case 8:e.profile=n.profile,e.isFollowed=n.isFollowed,r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](0),console.error(r.t0),d["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 16:case"end":return r.stop()}}),r,null,[[0,12]])})))()}},computed:Object(i["a"])(Object(i["a"])({},Object(Q["b"])(["currentUser","isAuthenticated"])),{},{commentedRestaurants:function(){var t=new Map;return this.profile.Comments.forEach((function(e){t.set(e.Restaurant.id,e.Restaurant)})),Array.from(t.values())}}),created:function(){var t=this.$route.params.id;this.fetchUser(t)},beforeRouteUpdate:function(t,e,r){var s=t.params.id;this.fetchUser(s),r()}},J=T,N=Object(p["a"])(J,s,n,!1,null,null,null);e["default"]=N.exports},"4ec9":function(t,e,r){"use strict";var s=r("6d61"),n=r("6566");t.exports=s("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},6566:function(t,e,r){"use strict";var s=r("9bf2").f,n=r("7c73"),i=r("e2cc"),a=r("0366"),o=r("19aa"),l=r("2266"),c=r("7dd0"),u=r("2626"),d=r("83ab"),f=r("f183").fastKey,v=r("69f3"),p=v.set,h=v.getterFor;t.exports={getConstructor:function(t,e,r,c){var u=t((function(t,s){o(t,u,e),p(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=s&&l(s,t[c],{that:t,AS_ENTRIES:r})})),v=h(e),m=function(t,e,r){var s,n,i=v(t),a=g(t,e);return a?a.value=r:(i.last=a={index:n=f(e,!0),key:e,value:r,previous:s=i.last,next:void 0,removed:!1},i.first||(i.first=a),s&&(s.next=a),d?i.size++:t.size++,"F"!==n&&(i.index[n]=a)),t},g=function(t,e){var r,s=v(t),n=f(e);if("F"!==n)return s.index[n];for(r=s.first;r;r=r.next)if(r.key==e)return r};return i(u.prototype,{clear:function(){var t=this,e=v(t),r=e.index,s=e.first;while(s)s.removed=!0,s.previous&&(s.previous=s.previous.next=void 0),delete r[s.index],s=s.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,r=v(e),s=g(e,t);if(s){var n=s.next,i=s.previous;delete r.index[s.index],s.removed=!0,i&&(i.next=n),n&&(n.previous=i),r.first==s&&(r.first=n),r.last==s&&(r.last=i),d?r.size--:e.size--}return!!s},forEach:function(t){var e,r=v(this),s=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){s(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),i(u.prototype,r?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),d&&s(u.prototype,"size",{get:function(){return v(this).size}}),u},setStrong:function(t,e,r){var s=e+" Iterator",n=h(e),i=h(s);c(t,e,(function(t,e){p(this,{type:s,target:t,state:n(t),kind:e,last:void 0})}),(function(){var t=i(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),u(e)}}},"6d61":function(t,e,r){"use strict";var s=r("23e7"),n=r("da84"),i=r("94ca"),a=r("6eeb"),o=r("f183"),l=r("2266"),c=r("19aa"),u=r("861d"),d=r("d039"),f=r("1c7e"),v=r("d44e"),p=r("7156");t.exports=function(t,e,r){var h=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),g=h?"set":"add",w=n[t],b=w&&w.prototype,y=w,x={},_=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(i(t,"function"!=typeof w||!(m||b.forEach&&!d((function(){(new w).entries().next()})))))y=r.getConstructor(e,t,h,g),o.REQUIRED=!0;else if(i(t,!0)){var C=new y,k=C[g](m?{}:-0,1)!=C,R=d((function(){C.has(1)})),F=f((function(t){new w(t)})),E=!m&&d((function(){var t=new w,e=5;while(e--)t[g](e,e);return!t.has(-0)}));F||(y=e((function(e,r){c(e,y,t);var s=p(new w,e,y);return void 0!=r&&l(r,s[g],{that:s,AS_ENTRIES:h}),s})),y.prototype=b,b.constructor=y),(R||E)&&(_("delete"),_("has"),h&&_("get")),(E||k)&&_(g),m&&b.clear&&delete b.clear}return x[t]=y,s({global:!0,forced:y!=w},x),v(y,t),m||r.setStrong(y,t,h),y}},a630:function(t,e,r){var s=r("23e7"),n=r("4df4"),i=r("1c7e"),a=!i((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:a},{from:n})},bb2f:function(t,e,r){var s=r("d039");t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d81d:function(t,e,r){"use strict";var s=r("23e7"),n=r("b727").map,i=r("1dde"),a=r("ae40"),o=i("map"),l=a("map");s({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},f183:function(t,e,r){var s=r("d012"),n=r("861d"),i=r("5135"),a=r("9bf2").f,o=r("90e3"),l=r("bb2f"),c=o("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(t){a(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},v=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,c)){if(!d(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},p=function(t,e){if(!i(t,c)){if(!d(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},h=function(t){return l&&m.REQUIRED&&d(t)&&!i(t,c)&&f(t),t},m=t.exports={REQUIRED:!1,fastKey:v,getWeakData:p,onFreeze:h};s[c]=!0}}]);
//# sourceMappingURL=chunk-e9554a4a.43f8d0c9.js.map